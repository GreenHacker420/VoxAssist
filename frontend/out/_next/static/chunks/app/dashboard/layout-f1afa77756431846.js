(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{41729:(e,t,s)=>{"use strict";s.d(t,{F:()=>i,Y:()=>d});var r=s(95155),a=s(12115),n=s(9829),o=s(76924),l=s(40459);let c=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[s,i]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1),{user:m}=(0,o.A)();return(0,a.useEffect)(()=>{if(m){let e=(0,n.io)(l.env.NEXT_PUBLIC_WS_URL||"http://localhost:5000",{auth:{token:localStorage.getItem("token")}});return e.on("connect",()=>{u(!0),console.log("Connected to WebSocket server")}),e.on("disconnect",()=>{u(!1),console.log("Disconnected from WebSocket server")}),i(e),()=>{e.disconnect()}}},[m]),(0,r.jsx)(c.Provider,{value:{socket:s,connected:d,joinCall:e=>{s&&s.emit("join-call",e)},leaveCall:e=>{s&&s.emit("leave-call",e)}},children:t})}function d(){let e=(0,a.useContext)(c);if(void 0===e)throw Error("useSocket must be used within a SocketProvider");return e}},46612:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>I});var r=s(95155),a=s(76924),n=s(20063),o=s(12115),l=s(70959),c=s(52619),i=s.n(c),d=s(64269),u=s(13533),m=s(49852),x=s(21219),h=s(77016),g=s(49128),f=s(10194),p=s(15279),y=s(68887);let b=[{name:"Dashboard",href:"/dashboard",icon:u.A},{name:"Live Calls",href:"/dashboard/calls",icon:m.A},{name:"Analytics",href:"/dashboard/analytics",icon:x.A},{name:"Voice Settings",href:"/dashboard/voice",icon:h.A},{name:"Knowledge Base",href:"/dashboard/knowledge",icon:g.A},{name:"Team",href:"/dashboard/team",icon:f.A},{name:"Notifications",href:"/dashboard/notifications",icon:p.A},{name:"Settings",href:"/dashboard/settings",icon:y.A}];function v(){let e=(0,n.usePathname)(),[t,s]=(0,o.useState)(!1);return(0,r.jsxs)("div",{className:(0,d.cn)("bg-white border-r border-gray-200 flex flex-col transition-all duration-300",t?"w-16":"w-64"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"h-8 w-8 bg-primary-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)(h.A,{className:"h-5 w-5 text-white"})}),!t&&(0,r.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"VoxAssist"})]}),(0,r.jsx)("button",{onClick:()=>s(!t),className:"p-1 rounded-md hover:bg-gray-100",children:(0,r.jsx)("svg",{className:(0,d.cn)("h-4 w-4 transition-transform",t?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})]}),(0,r.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:b.map(s=>{let a=e===s.href;return(0,r.jsxs)(i(),{href:s.href,className:(0,d.cn)("flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",a?"bg-primary-50 text-primary-700 border border-primary-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,r.jsx)(s.icon,{className:"h-5 w-5 flex-shrink-0"}),!t&&(0,r.jsx)("span",{children:s.name})]},s.name)})}),(0,r.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:(0,d.cn)("flex items-center space-x-3 px-3 py-2 rounded-lg bg-success-50",t&&"justify-center"),children:[(0,r.jsx)("div",{className:"h-2 w-2 bg-success-500 rounded-full animate-pulse"}),!t&&(0,r.jsx)("span",{className:"text-sm font-medium text-success-700",children:"AI Agent Online"})]})})]})}var j=s(41729),N=s(82273),w=s(29252),A=s(22441),k=s(51915),S=s(42589);function C(){let{user:e,logout:t}=(0,a.A)(),{connected:s}=(0,j.Y)(),[n]=(0,o.useState)([{id:1,message:"New call started",time:"2 min ago",unread:!0},{id:2,message:"AI confidence low on call #1234",time:"5 min ago",unread:!0},{id:3,message:"Daily report ready",time:"1 hour ago",unread:!1}]),l=n.filter(e=>e.unread).length;return(0,r.jsx)("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Dashboard"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Welcome back, ",null==e?void 0:e.name]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:(0,d.cn)("h-2 w-2 rounded-full",s?"bg-success-500":"bg-danger-500")}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:s?"Connected":"Disconnected"})]}),(0,r.jsxs)(N.W1,{as:"div",className:"relative",children:[(0,r.jsxs)(N.W1.Button,{className:"relative p-2 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 rounded-lg",children:[(0,r.jsx)(p.A,{className:"h-6 w-6"}),l>0&&(0,r.jsx)("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-danger-500 text-white text-xs rounded-full flex items-center justify-center",children:l})]}),(0,r.jsx)(w.e,{as:o.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,r.jsxs)(N.W1.Items,{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:[(0,r.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Notifications"})}),(0,r.jsx)("div",{className:"max-h-64 overflow-y-auto",children:n.map(e=>(0,r.jsx)(N.W1.Item,{children:t=>{let{active:s}=t;return(0,r.jsxs)("div",{className:(0,d.cn)("px-4 py-3 border-b border-gray-100 last:border-b-0",s&&"bg-gray-50",e.unread&&"bg-blue-50"),children:[(0,r.jsx)("p",{className:"text-sm text-gray-900",children:e.message}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.time})]})}},e.id))}),(0,r.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,r.jsx)("button",{className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"View all notifications"})})]})})]}),(0,r.jsxs)(N.W1,{as:"div",className:"relative",children:[(0,r.jsxs)(N.W1.Button,{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:[(0,r.jsx)(A.A,{className:"h-8 w-8 text-gray-400"}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==e?void 0:e.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:null==e?void 0:e.role})]})]}),(0,r.jsx)(w.e,{as:o.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,r.jsx)(N.W1.Items,{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:(0,r.jsxs)("div",{className:"py-1",children:[(0,r.jsx)(N.W1.Item,{children:e=>{let{active:t}=e;return(0,r.jsxs)("button",{className:(0,d.cn)("flex items-center space-x-2 w-full px-4 py-2 text-sm text-left",t?"bg-gray-50 text-gray-900":"text-gray-700"),children:[(0,r.jsx)(A.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Profile"})]})}}),(0,r.jsx)(N.W1.Item,{children:e=>{let{active:t}=e;return(0,r.jsxs)("button",{className:(0,d.cn)("flex items-center space-x-2 w-full px-4 py-2 text-sm text-left",t?"bg-gray-50 text-gray-900":"text-gray-700"),children:[(0,r.jsx)(k.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Settings"})]})}}),(0,r.jsx)("div",{className:"border-t border-gray-100"}),(0,r.jsx)(N.W1.Item,{children:e=>{let{active:s}=e;return(0,r.jsxs)("button",{onClick:t,className:(0,d.cn)("flex items-center space-x-2 w-full px-4 py-2 text-sm text-left",s?"bg-gray-50 text-danger-600":"text-danger-600"),children:[(0,r.jsx)(S.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Sign out"})]})}})]})})})]})]})]})})}function I(e){let{children:t}=e,{user:s,loading:c}=(0,a.A)(),i=(0,n.useRouter)();return((0,o.useEffect)(()=>{c||s||i.push("/login")},[s,c,i]),c)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(l.a,{size:"lg"})}):s?(0,r.jsxs)("div",{className:"h-screen flex bg-gray-50",children:[(0,r.jsx)(v,{}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,r.jsx)(C,{}),(0,r.jsx)("main",{className:"flex-1 overflow-auto p-6",children:t})]})]}):null}},64269:(e,t,s)=>{"use strict";s.d(t,{HS:()=>c,a3:()=>o,cn:()=>n,n4:()=>l,qY:()=>i});var r=s(2821),a=s(75889);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}function o(e){let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))}function l(e){let t=e.replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return t?"(".concat(t[1],") ").concat(t[2],"-").concat(t[3]):e}function c(e){switch(e.toLowerCase()){case"positive":return"text-success-600 bg-success-50";case"negative":return"text-danger-600 bg-danger-50";default:return"text-gray-600 bg-gray-50"}}function i(e){switch(e.toLowerCase()){case"completed":case"resolved":return"text-success-600 bg-success-50";case"in-progress":case"active":return"text-primary-600 bg-primary-50";case"escalated":case"failed":return"text-danger-600 bg-danger-50";case"pending":case"waiting":return"text-warning-600 bg-warning-50";default:return"text-gray-600 bg-gray-50"}}},70959:(e,t,s)=>{"use strict";s.d(t,{a:()=>n});var r=s(95155),a=s(64269);function n(e){let{size:t="md",className:s}=e;return(0,r.jsx)("div",{className:(0,a.cn)("flex items-center justify-center",s),children:(0,r.jsx)("div",{className:(0,a.cn)("animate-spin rounded-full border-2 border-gray-300 border-t-primary-600",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t])})})}},76924:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,O:()=>i});var r=s(95155),a=s(12115),n=s(20063),o=s(77303),l=s(90960);let c=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[s,i]=(0,a.useState)(null),[d,u]=(0,a.useState)(!0),m=(0,n.useRouter)();(0,a.useEffect)(()=>{localStorage.getItem("token")?x():u(!1)},[]);let x=async()=>{try{let e=await l.F.get("/auth/profile");i(e.data.data)}catch(e){localStorage.removeItem("token"),o.Ay.error("Session expired. Please login again.")}finally{u(!1)}},h=async(e,t)=>{try{let{token:s,user:r}=(await l.F.post("/auth/login",{email:e,password:t})).data.data;localStorage.setItem("token",s),i(r),o.Ay.success("Welcome back, ".concat(r.name,"!")),m.push("/dashboard")}catch(t){var s,r;let e=(null==(r=t.response)||null==(s=r.data)?void 0:s.error)||"Login failed";throw o.Ay.error(e),t}},g=async(e,t,s)=>{try{let{token:r,user:a}=(await l.F.post("/auth/register",{email:e,password:t,name:s})).data.data;localStorage.setItem("token",r),i(a),o.Ay.success("Welcome to VoxAssist, ".concat(a.name,"!")),m.push("/dashboard")}catch(t){var r,a;let e=(null==(a=t.response)||null==(r=a.data)?void 0:r.error)||"Registration failed";throw o.Ay.error(e),t}},f=async e=>{try{let t=await l.F.put("/auth/profile",e);i(t.data.data),o.Ay.success("Profile updated successfully")}catch(r){var t,s;let e=(null==(s=r.response)||null==(t=s.data)?void 0:t.error)||"Failed to update profile";throw o.Ay.error(e),r}};return(0,r.jsx)(c.Provider,{value:{user:s,loading:d,login:h,register:g,logout:()=>{localStorage.removeItem("token"),i(null),o.Ay.success("Logged out successfully"),m.push("/login")},updateProfile:f},children:t})}function d(){let e=(0,a.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},90960:(e,t,s)=>{"use strict";s.d(t,{F:()=>r});let r=s(95125).A.create({baseURL:"".concat("https://voxassist.onrender.com","/api"),headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)})},92116:(e,t,s)=>{Promise.resolve().then(s.bind(s,46612))}},e=>{e.O(0,[545,278,909,829,619,540,441,255,358],()=>e(e.s=92116)),_N_E=e.O()}]);