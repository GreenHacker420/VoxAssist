(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{13673:()=>{},28963:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}},36300:(e,t,o)=>{"use strict";o.d(t,{Providers:()=>l});var r=o(95155),a=o(77303),s=o(76924),n=o(41729);function l(e){let{children:t}=e;return(0,r.jsx)(s.O,{children:(0,r.jsxs)(n.F,{children:[t,(0,r.jsx)(a.l$,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#22c55e",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})}},41729:(e,t,o)=>{"use strict";o.d(t,{F:()=>i,Y:()=>u});var r=o(95155),a=o(12115),s=o(9829),n=o(76924),l=o(40459);let c=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[o,i]=(0,a.useState)(null),[u,d]=(0,a.useState)(!1),{user:h}=(0,n.A)();return(0,a.useEffect)(()=>{if(h){let e=(0,s.io)(l.env.NEXT_PUBLIC_WS_URL||"http://localhost:5000",{auth:{token:localStorage.getItem("token")}});return e.on("connect",()=>{d(!0),console.log("Connected to WebSocket server")}),e.on("disconnect",()=>{d(!1),console.log("Disconnected from WebSocket server")}),i(e),()=>{e.disconnect()}}},[h]),(0,r.jsx)(c.Provider,{value:{socket:o,connected:u,joinCall:e=>{o&&o.emit("join-call",e)},leaveCall:e=>{o&&o.emit("leave-call",e)}},children:t})}function u(){let e=(0,a.useContext)(c);if(void 0===e)throw Error("useSocket must be used within a SocketProvider");return e}},70025:(e,t,o)=>{Promise.resolve().then(o.t.bind(o,28963,23)),Promise.resolve().then(o.t.bind(o,13673,23)),Promise.resolve().then(o.bind(o,36300))},76924:(e,t,o)=>{"use strict";o.d(t,{A:()=>u,O:()=>i});var r=o(95155),a=o(12115),s=o(20063),n=o(77303),l=o(90960);let c=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[o,i]=(0,a.useState)(null),[u,d]=(0,a.useState)(!0),h=(0,s.useRouter)();(0,a.useEffect)(()=>{localStorage.getItem("token")?f():d(!1)},[]);let f=async()=>{try{let e=await l.F.get("/auth/profile");i(e.data.data)}catch(e){localStorage.removeItem("token"),n.Ay.error("Session expired. Please login again.")}finally{d(!1)}},m=async(e,t)=>{try{let{token:o,user:r}=(await l.F.post("/auth/login",{email:e,password:t})).data.data;localStorage.setItem("token",o),i(r),n.Ay.success("Welcome back, ".concat(r.name,"!")),h.push("/dashboard")}catch(t){var o,r;let e=(null==(r=t.response)||null==(o=r.data)?void 0:o.error)||"Login failed";throw n.Ay.error(e),t}},p=async(e,t,o)=>{try{let{token:r,user:a}=(await l.F.post("/auth/register",{email:e,password:t,name:o})).data.data;localStorage.setItem("token",r),i(a),n.Ay.success("Welcome to VoxAssist, ".concat(a.name,"!")),h.push("/dashboard")}catch(t){var r,a;let e=(null==(a=t.response)||null==(r=a.data)?void 0:r.error)||"Registration failed";throw n.Ay.error(e),t}},v=async e=>{try{let t=await l.F.put("/auth/profile",e);i(t.data.data),n.Ay.success("Profile updated successfully")}catch(r){var t,o;let e=(null==(o=r.response)||null==(t=o.data)?void 0:t.error)||"Failed to update profile";throw n.Ay.error(e),r}};return(0,r.jsx)(c.Provider,{value:{user:o,loading:u,login:m,register:p,logout:()=>{localStorage.removeItem("token"),i(null),n.Ay.success("Logged out successfully"),h.push("/login")},updateProfile:v},children:t})}function u(){let e=(0,a.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},90960:(e,t,o)=>{"use strict";o.d(t,{F:()=>r});let r=o(95125).A.create({baseURL:"".concat("https://voxassist.onrender.com","/api"),headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)})}},e=>{e.O(0,[300,278,829,441,255,358],()=>e(e.s=70025)),_N_E=e.O()}]);