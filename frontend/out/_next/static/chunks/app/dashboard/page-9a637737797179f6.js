(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{41729:(e,t,s)=>{"use strict";s.d(t,{F:()=>o,Y:()=>d});var a=s(95155),r=s(12115),l=s(9829),n=s(76924),c=s(40459);let i=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,r.useState)(null),[d,m]=(0,r.useState)(!1),{user:x}=(0,n.A)();return(0,r.useEffect)(()=>{if(x){let e=(0,l.io)(c.env.NEXT_PUBLIC_WS_URL||"http://localhost:5000",{auth:{token:localStorage.getItem("token")}});return e.on("connect",()=>{m(!0),console.log("Connected to WebSocket server")}),e.on("disconnect",()=>{m(!1),console.log("Disconnected from WebSocket server")}),o(e),()=>{e.disconnect()}}},[x]),(0,a.jsx)(i.Provider,{value:{socket:s,connected:d,joinCall:e=>{s&&s.emit("join-call",e)},leaveCall:e=>{s&&s.emit("leave-call",e)}},children:t})}function d(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useSocket must be used within a SocketProvider");return e}},61373:(e,t,s)=>{Promise.resolve().then(s.bind(s,64476))},64269:(e,t,s)=>{"use strict";s.d(t,{HS:()=>i,a3:()=>n,cn:()=>l,n4:()=>c,qY:()=>o});var a=s(2821),r=s(75889);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}function n(e){let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))}function c(e){let t=e.replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return t?"(".concat(t[1],") ").concat(t[2],"-").concat(t[3]):e}function i(e){switch(e.toLowerCase()){case"positive":return"text-success-600 bg-success-50";case"negative":return"text-danger-600 bg-danger-50";default:return"text-gray-600 bg-gray-50"}}function o(e){switch(e.toLowerCase()){case"completed":case"resolved":return"text-success-600 bg-success-50";case"in-progress":case"active":return"text-primary-600 bg-primary-50";case"escalated":case"failed":return"text-danger-600 bg-danger-50";case"pending":case"waiting":return"text-warning-600 bg-warning-50";default:return"text-gray-600 bg-gray-50"}}},64476:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>R});var a=s(95155),r=s(12115),l=s(41729),n=s(90960),c=s(64269);function i(e){let{title:t,value:s,change:r,changeType:l,icon:n}=e;return(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900 mt-2",children:s})]}),(0,a.jsx)("div",{className:"h-12 w-12 bg-primary-50 rounded-lg flex items-center justify-center",children:(0,a.jsx)(n,{className:"h-6 w-6 text-primary-600"})})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,a.jsx)("span",{className:(0,c.cn)("text-sm font-medium","positive"===l?"text-success-600":"negative"===l?"text-danger-600":"text-gray-600"),children:r}),(0,a.jsx)("span",{className:"text-sm text-gray-600 ml-2",children:"from yesterday"})]})]})}var o=s(26991),d=s(82843),m=s(68425),x=s(47734),u=s(74595),h=s(33420),g=s(85432);function f(e){let{data:t}=e,s=t.map(e=>({...e,time:"".concat(e.hour.toString().padStart(2,"0"),":00")}));return(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(o.u,{width:"100%",height:"100%",children:(0,a.jsxs)(d.b,{data:s,children:[(0,a.jsx)(m.d,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(x.W,{dataKey:"time",stroke:"#6b7280",fontSize:12,tickLine:!1}),(0,a.jsx)(u.h,{stroke:"#6b7280",fontSize:12,tickLine:!1}),(0,a.jsx)(h.m,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),(0,a.jsx)(g.N,{type:"monotone",dataKey:"calls",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#3b82f6",strokeWidth:2}})]})})})}var p=s(12723),v=s(74291),y=s(69386),j=s(37665);let b={positive:"#22c55e",neutral:"#6b7280",negative:"#ef4444"};function N(e){let{data:t}=e,s=[{name:"Positive",value:t.positive,color:b.positive},{name:"Neutral",value:t.neutral,color:b.neutral},{name:"Negative",value:t.negative,color:b.negative}];return(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(o.u,{width:"100%",height:"100%",children:(0,a.jsxs)(p.r,{children:[(0,a.jsx)(v.F,{data:s,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{cx:t,cy:s,midAngle:r,innerRadius:l,outerRadius:n,percent:c}=e,i=Math.PI/180,o=l+(n-l)*.5,d=t+o*Math.cos(-r*i),m=s+o*Math.sin(-r*i);return(0,a.jsx)("text",{x:d,y:m,fill:"white",textAnchor:d>t?"start":"end",dominantBaseline:"central",fontSize:12,fontWeight:"medium",children:"".concat((100*c).toFixed(0),"%")})},outerRadius:80,fill:"#8884d8",dataKey:"value",children:s.map((e,t)=>(0,a.jsx)(y.f,{fill:e.color},"cell-".concat(t)))}),(0,a.jsx)(h.m,{formatter:e=>["".concat(e.toFixed(1),"%"),"Percentage"],contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),(0,a.jsx)(j.s,{verticalAlign:"bottom",height:36,formatter:(e,t)=>(0,a.jsx)("span",{style:{color:t.color,fontWeight:500},children:e})})]})})})}var w=s(49852),S=s(36337);function A(e){let{calls:t}=e;return 0===t.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(w.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No active calls"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Calls will appear here when they start"})]}):(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 bg-primary-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(S.A,{className:"h-5 w-5 text-primary-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:(0,c.n4)(e.customerPhone)}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Duration: ",(0,c.a3)(e.duration)]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((0,c.qY)(e.status)),children:e.status}),e.sentiment&&(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((0,c.HS)(e.sentiment)),children:e.sentiment})]})]}),e.currentTopic&&(0,a.jsxs)("div",{className:"mt-3 p-2 bg-gray-50 rounded text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Current topic: "}),(0,a.jsx)("span",{className:"text-gray-600",children:e.currentTopic})]}),e.confidence&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"AI Confidence"}),(0,a.jsxs)("span",{className:"font-medium",children:[e.confidence,"%"]})]}),(0,a.jsx)("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(e.confidence,"%")}})})]}),(0,a.jsxs)("div",{className:"mt-3 flex space-x-2",children:[(0,a.jsx)("button",{className:"btn-secondary text-xs px-3 py-1",children:"Monitor"}),(0,a.jsx)("button",{className:"btn-danger text-xs px-3 py-1",children:"Escalate"})]})]},e.id))})}function k(e){let{active:t}=e,[s]=(0,r.useState)(Array.from({length:20},(e,t)=>t));return(0,a.jsxs)("div",{className:"flex items-center justify-center h-32 bg-gradient-to-r from-primary-50 to-primary-100 rounded-lg",children:[(0,a.jsx)("div",{className:"flex items-center space-x-1",children:s.map(e=>(0,a.jsx)("div",{className:(0,c.cn)("w-1 bg-primary-600 rounded-full transition-all duration-300",t?"animate-wave":"h-2"),style:{height:t?"".concat(40*Math.random()+10,"px"):"8px",animationDelay:"".concat(.1*e,"s"),animationDuration:"".concat(.5*Math.random()+1,"s")}},e))}),(0,a.jsx)("div",{className:"absolute",children:(0,a.jsx)("div",{className:(0,c.cn)("w-16 h-16 rounded-full border-4 border-primary-600 flex items-center justify-center",t&&"pulse-glow"),children:(0,a.jsx)("svg",{className:"w-8 h-8 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})})})})]})}var C=s(6956),I=s(36834),P=s(88125);function R(){let[e,t]=(0,r.useState)(null),[s,c]=(0,r.useState)(!0),[o,d]=(0,r.useState)([]),{socket:m,connected:x}=(0,l.Y)();(0,r.useEffect)(()=>{u()},[]),(0,r.useEffect)(()=>{if(m)return m.on("call-update",h),m.on("new-call",g),m.on("call-ended",p),()=>{m.off("call-update"),m.off("new-call"),m.off("call-ended")}},[m]);let u=async()=>{try{let e=await n.F.get("/analytics/dashboard");t(e.data.data)}catch(e){console.error("Failed to fetch dashboard data:",e)}finally{c(!1)}},h=e=>{d(t=>t.map(t=>t.id===e.id?{...t,...e}:t))},g=e=>{d(t=>[...t,e])},p=e=>{d(t=>t.filter(t=>t.id!==e))};if(s||!e)return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"card p-6 animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]},t))})});let v=[{title:"Total Calls Today",value:e.callVolume.today.toString(),change:"+".concat(((e.callVolume.today-e.callVolume.yesterday)/e.callVolume.yesterday*100).toFixed(1),"%"),changeType:e.callVolume.today>e.callVolume.yesterday?"positive":"negative",icon:w.A},{title:"Resolution Rate",value:"".concat(e.overview.resolutionRate,"%"),change:"+2.1%",changeType:"positive",icon:C.A},{title:"Avg Call Duration",value:"".concat(Math.floor(e.overview.avgCallDuration/60),":").concat((e.overview.avgCallDuration%60).toString().padStart(2,"0")),change:"-0.5%",changeType:"positive",icon:I.A},{title:"Escalation Rate",value:"".concat((e.overview.escalatedCalls/e.overview.totalCalls*100).toFixed(1),"%"),change:"-1.2%",changeType:"positive",icon:P.A}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:v.map((e,t)=>(0,a.jsx)(i,{...e},t))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Call Volume (24h)"}),(0,a.jsx)(f,{data:e.hourlyDistribution})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sentiment Analysis"}),(0,a.jsx)(N,{data:e.sentimentAnalysis})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Live Calls"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full ".concat(x?"bg-success-500":"bg-danger-500")}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[o.length," active calls"]})]})]}),(0,a.jsx)(A,{calls:o})]})}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"AI Voice Activity"}),(0,a.jsx)(k,{active:o.length>0}),(0,a.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"AI Confidence"}),(0,a.jsx)("span",{className:"font-medium text-success-600",children:"92%"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Response Time"}),(0,a.jsx)("span",{className:"font-medium",children:"1.2s"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Voice Quality"}),(0,a.jsx)("span",{className:"font-medium text-success-600",children:"Excellent"})]})]}),(0,a.jsx)("button",{className:"w-full mt-4 btn-primary",children:"Start Test Call"})]})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left",children:[(0,a.jsx)(w.A,{className:"h-6 w-6 text-primary-600 mb-2"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Initiate Call"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Start a new AI support call"})]}),(0,a.jsxs)("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left",children:[(0,a.jsx)(C.A,{className:"h-6 w-6 text-success-600 mb-2"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"View Reports"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Access detailed analytics"})]}),(0,a.jsxs)("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left",children:[(0,a.jsx)(P.A,{className:"h-6 w-6 text-warning-600 mb-2"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Manage Escalations"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Handle escalated calls"})]})]})]})]})}},76924:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,O:()=>o});var a=s(95155),r=s(12115),l=s(20063),n=s(77303),c=s(90960);let i=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,r.useState)(null),[d,m]=(0,r.useState)(!0),x=(0,l.useRouter)();(0,r.useEffect)(()=>{localStorage.getItem("token")?u():m(!1)},[]);let u=async()=>{try{let e=await c.F.get("/auth/profile");o(e.data.data)}catch(e){localStorage.removeItem("token"),n.Ay.error("Session expired. Please login again.")}finally{m(!1)}},h=async(e,t)=>{try{let{token:s,user:a}=(await c.F.post("/auth/login",{email:e,password:t})).data.data;localStorage.setItem("token",s),o(a),n.Ay.success("Welcome back, ".concat(a.name,"!")),x.push("/dashboard")}catch(t){var s,a;let e=(null==(a=t.response)||null==(s=a.data)?void 0:s.error)||"Login failed";throw n.Ay.error(e),t}},g=async(e,t,s)=>{try{let{token:a,user:r}=(await c.F.post("/auth/register",{email:e,password:t,name:s})).data.data;localStorage.setItem("token",a),o(r),n.Ay.success("Welcome to VoxAssist, ".concat(r.name,"!")),x.push("/dashboard")}catch(t){var a,r;let e=(null==(r=t.response)||null==(a=r.data)?void 0:a.error)||"Registration failed";throw n.Ay.error(e),t}},f=async e=>{try{let t=await c.F.put("/auth/profile",e);o(t.data.data),n.Ay.success("Profile updated successfully")}catch(a){var t,s;let e=(null==(s=a.response)||null==(t=s.data)?void 0:t.error)||"Failed to update profile";throw n.Ay.error(e),a}};return(0,a.jsx)(i.Provider,{value:{user:s,loading:d,login:h,register:g,logout:()=>{localStorage.removeItem("token"),o(null),n.Ay.success("Logged out successfully"),x.push("/login")},updateProfile:f},children:t})}function d(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},90960:(e,t,s)=>{"use strict";s.d(t,{F:()=>a});let a=s(95125).A.create({baseURL:"".concat("https://voxassist.onrender.com","/api"),headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)})}},e=>{e.O(0,[278,909,829,149,441,255,358],()=>e(e.s=61373)),_N_E=e.O()}]);