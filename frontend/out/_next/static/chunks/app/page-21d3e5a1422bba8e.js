(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{64269:(e,t,r)=>{"use strict";r.d(t,{HS:()=>l,a3:()=>n,cn:()=>o,n4:()=>c,qY:()=>u});var a=r(2821),s=r(75889);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}function n(e){let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))}function c(e){let t=e.replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return t?"(".concat(t[1],") ").concat(t[2],"-").concat(t[3]):e}function l(e){switch(e.toLowerCase()){case"positive":return"text-success-600 bg-success-50";case"negative":return"text-danger-600 bg-danger-50";default:return"text-gray-600 bg-gray-50"}}function u(e){switch(e.toLowerCase()){case"completed":case"resolved":return"text-success-600 bg-success-50";case"in-progress":case"active":return"text-primary-600 bg-primary-50";case"escalated":case"failed":return"text-danger-600 bg-danger-50";case"pending":case"waiting":return"text-warning-600 bg-warning-50";default:return"text-gray-600 bg-gray-50"}}},70959:(e,t,r)=>{"use strict";r.d(t,{a:()=>o});var a=r(95155),s=r(64269);function o(e){let{size:t="md",className:r}=e;return(0,a.jsx)("div",{className:(0,s.cn)("flex items-center justify-center",r),children:(0,a.jsx)("div",{className:(0,s.cn)("animate-spin rounded-full border-2 border-gray-300 border-t-primary-600",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t])})})}},76924:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,O:()=>u});var a=r(95155),s=r(12115),o=r(20063),n=r(77303),c=r(90960);let l=(0,s.createContext)(void 0);function u(e){let{children:t}=e,[r,u]=(0,s.useState)(null),[i,d]=(0,s.useState)(!0),g=(0,o.useRouter)();(0,s.useEffect)(()=>{localStorage.getItem("token")?h():d(!1)},[]);let h=async()=>{try{let e=await c.F.get("/auth/profile");u(e.data.data)}catch(e){localStorage.removeItem("token"),n.Ay.error("Session expired. Please login again.")}finally{d(!1)}},p=async(e,t)=>{try{let{token:r,user:a}=(await c.F.post("/auth/login",{email:e,password:t})).data.data;localStorage.setItem("token",r),u(a),n.Ay.success("Welcome back, ".concat(a.name,"!")),g.push("/dashboard")}catch(t){var r,a;let e=(null==(a=t.response)||null==(r=a.data)?void 0:r.error)||"Login failed";throw n.Ay.error(e),t}},f=async(e,t,r)=>{try{let{token:a,user:s}=(await c.F.post("/auth/register",{email:e,password:t,name:r})).data.data;localStorage.setItem("token",a),u(s),n.Ay.success("Welcome to VoxAssist, ".concat(s.name,"!")),g.push("/dashboard")}catch(t){var a,s;let e=(null==(s=t.response)||null==(a=s.data)?void 0:a.error)||"Registration failed";throw n.Ay.error(e),t}},m=async e=>{try{let t=await c.F.put("/auth/profile",e);u(t.data.data),n.Ay.success("Profile updated successfully")}catch(a){var t,r;let e=(null==(r=a.response)||null==(t=r.data)?void 0:t.error)||"Failed to update profile";throw n.Ay.error(e),a}};return(0,a.jsx)(l.Provider,{value:{user:r,loading:i,login:p,register:f,logout:()=>{localStorage.removeItem("token"),u(null),n.Ay.success("Logged out successfully"),g.push("/login")},updateProfile:m},children:t})}function i(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},77930:(e,t,r)=>{Promise.resolve().then(r.bind(r,89547))},89547:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(95155),s=r(12115),o=r(20063),n=r(76924),c=r(70959);function l(){let{user:e,loading:t}=(0,n.A)(),r=(0,o.useRouter)();return((0,s.useEffect)(()=>{t||(e?r.push("/dashboard"):r.push("/login"))},[e,t,r]),t)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(c.a,{size:"lg"})}):null}},90960:(e,t,r)=>{"use strict";r.d(t,{F:()=>a});let a=r(95125).A.create({baseURL:"".concat("https://voxassist.onrender.com","/api"),headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)})}},e=>{e.O(0,[278,909,441,255,358],()=>e(e.s=77930)),_N_E=e.O()}]);